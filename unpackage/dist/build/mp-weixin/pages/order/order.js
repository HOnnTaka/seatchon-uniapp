"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("uni-section")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-load-more")+e.resolveComponent("unicloud-db")+e.resolveComponent("uni-card"))()}Math||((()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js"))();const t={__name:"order",setup(t){const o=e.ref(e.index.getStorageSync("userinfo")),a=e.ref(!1),n=getCurrentPages().find((e=>"pages/order/order"===e.route)),i=e.Ws.database(),d=e.ref([i.collection("order").where('userId ==  "216124125"').field("chartId,x,y,userId").getTemp(),i.collection("seat-chart").field("_id,effectiveTimeRange,selectableTimeRange,title,note").getTemp()]);return e.onShow((()=>{var t,i;o.value=e.index.getStorageSync("userinfo"),console.log(getCurrentPages()),null==(t=n.$vm.$refs.orderDB)||t.loadData({clear:!0}),null==(i=n.$vm.$refs.adminDB)||i.loadData({clear:!0}),setTimeout((()=>{a.value=!0}),100)})),e.onHide((async()=>{a.value=!1})),e.onPullDownRefresh((async()=>{n.$vm.$refs.orderDB.loadData({clear:!0}),n.$vm.$refs.adminDB.loadData({clear:!0}),e.index.stopPullDownRefresh()})),(t,n)=>({a:e.p({title:"我的选座",type:"line"}),b:e.w((({data:t,loading:o,hasMore:a,error:n,options:i},d,r)=>e.e({a:n},n?{b:e.t(n.message)}:{},{c:e.f(t,((t,o,a)=>{return{a:e.t(t.chartId[0].title),b:e.t(t.chartId[0].note),c:e.t((n=t.chartId[0].effectiveTimeRange,n.join(" 至 "))),d:e.t(t.x),e:e.t(t.y),f:t.chartId[0]._id,g:"da2b5318-4-"+r+"-"+a+",da2b5318-3-"+r,h:e.p({clickable:!0,link:!0,to:"/pages/detail/detail?chartId="+t.chartId[0]._id,title:t.chartId[0].title,note:t.chartId[0].note})};var n})),d:"da2b5318-3-"+r+",da2b5318-2",e:"da2b5318-5-"+r+",da2b5318-2",f:e.p({status:o?"loading":a?"default":"no-more"}),g:r,h:d})),{name:"d",path:"b",vueId:"da2b5318-2,da2b5318-0"}),c:e.sr("orderDB","da2b5318-2,da2b5318-0"),d:e.p({options:t.options,collection:d.value,where:`userId=='${o.value._id}'`,orderby:"orderTime desc"}),e:e.p({padding:"0"}),f:e.p({title:"我的管理",type:"line"}),g:e.w((({data:t,loading:o,hasMore:a,error:n,options:i},d,r)=>e.e({a:n},n?{b:e.t(n.message)}:{},{c:e.f(t,((t,o,a)=>({a:e.t(t.title),b:e.t(t.note),c:e.t(t.administrators.length),d:t._id,e:"da2b5318-10-"+r+"-"+a+",da2b5318-9-"+r,f:e.p({clickable:!0,link:!0,to:"/pages/detail/detail?chartId="+t._id,title:t.title,note:t.note})}))),d:"da2b5318-9-"+r+",da2b5318-8",e:"da2b5318-11-"+r+",da2b5318-8",f:e.p({status:o?"loading":a?"default":"no-more"}),g:r,h:d})),{name:"d",path:"g",vueId:"da2b5318-8,da2b5318-6"}),h:e.sr("adminDB","da2b5318-8,da2b5318-6"),i:e.p({options:t.options,collection:"seat-chart",field:"title,note,administrators",where:`in('${o.value._id}', administrators)`,orderby:"createTime desc"}),j:e.p({padding:"0"}),k:e.s(a.value?"transition: all .5s ease; opacity: 1":"")})}},o=e._export_sfc(t,[["__scopeId","data-v-da2b5318"]]);wx.createPage(o);
