"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("uni-search-bar")+e.resolveComponent("uni-fab")+e.resolveComponent("uni-section")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-load-more")+e.resolveComponent("unicloud-db"))()}Math||((()=>"../../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../../uni_modules/uni-fab/components/uni-fab/uni-fab.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const n={__name:"index",setup(n){const o=getCurrentPages().find((e=>"pages/index/index"===e.route)),t=e.ref("");e.ref([]);const i=e.ref({}),a=e.ref(!1);e.onLoad((async()=>{})),e.onShow((async()=>{var n;i.value=e.index.getStorageSync("userinfo"),null==(n=o.$vm.$refs.udb)||n.loadData({clear:!0}),setTimeout((()=>{a.value=!0}),100)})),e.onHide((async()=>{a.value=!1})),e.onPullDownRefresh((async()=>{var n;await(null==(n=o.$vm.$refs.udb)?void 0:n.loadData({clear:!0})),e.index.stopPullDownRefresh()}));const s=e=>e.join(" 至 "),l=e=>{const n=(new Date).getTime(),{selectableTimeRange:o,effectiveTimeRange:t}=e,i=[new Date(o[0]).getTime(),new Date(o[1]).getTime()],a=[new Date(t[0]).getTime(),new Date(t[1]).getTime()];return n>a[0]&&n<a[1]?"生效中":n>i[0]&&n<i[1]?"选座中":n<i[0]?"未开始":n>a[1]?"已结束":void 0},d=async()=>{},u=()=>{e.index.navigateTo({url:"/pages/createSeatChart/createSeatChart"})};return(n,o)=>e.e({a:e.o(d),b:e.o((e=>t.value=e)),c:e.p({bgColor:"#fff",placeholder:"请输入搜索内容",modelValue:t.value}),d:1==i.value.type},1==i.value.type?{e:e.sr("fab","b78dc6bd-1"),f:e.o(u),g:e.p({pattern:{buttonColor:"#2979ff"},horizontal:"right",vertical:"bottom"})}:{},{h:e.p({title:"全部课室",type:"line"}),i:e.w((({data:n,loading:o,hasMore:t,error:a,options:d},u,r)=>e.e({a:a},a?{b:e.t(a.message)}:{},{c:e.f(n,((n,o,t)=>({a:e.t(n.title),b:e.t(n.note),c:e.t(s(n.selectableTimeRange)),d:e.t(s(n.effectiveTimeRange)),e:e.t(l(n)),f:n._id,g:e.o((o=>(async n=>{i.value?(e.index.showLoading({title:"加载中"}),e.index.navigateTo({url:`/pages/detail/detail?chartId=${n._id}`})):(await e.index.showModal({title:"提示",content:"还未登录，是否前往登录？",showCancel:!0,confirmText:"前往登录"})).confirm&&e.index.switchTab({url:"/pages/user/user"})})(n)),n._id),h:"b78dc6bd-5-"+r+"-"+t+",b78dc6bd-4-"+r,i:e.p({clickable:!0,link:!0,title:n.title,note:n.note})}))),d:"b78dc6bd-4-"+r+",b78dc6bd-3",e:"b78dc6bd-6-"+r+",b78dc6bd-3",f:e.p({status:o?"loading":t?"default":"no-more"}),g:r,h:u})),{name:"d",path:"i",vueId:"b78dc6bd-3"}),j:e.sr("udb","b78dc6bd-3"),k:e.p({options:n.options,collection:"seat-chart",orderby:"createdTime desc"}),l:e.s(a.value?"transition: all .5s ease; opacity: 1":"")})}},o=e._export_sfc(n,[["__scopeId","data-v-b78dc6bd"]]);wx.createPage(o);
